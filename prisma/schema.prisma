datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}


enum UserRole {
    CUSTOMER
    COURIER
}

model Customer {
    id         Int      @id @default(autoincrement())
    username   String   @unique
    email      String   @unique
    password   String
    firstName  String
    lastName   String?
    address    String
    city       String
    state      String
    zip        String
    phone      String
    role       UserRole @default(CUSTOMER)
    createdAt  DateTime @default(now())
    orders     Order[]
}

model Order {
    id                  Int      @id @default(autoincrement())
    customerId          Int
    customer            Customer @relation(fields: [customerId], references: [id])
    pickupDate          DateTime
    pickupTime          String   // Time as string (e.g., "14:30") for form compatibility
    pickupAddress       String
    pickupContactName   String?
    pickupContactPhone  String?
    pickupInstructions  String?
    totalPieces         Int
    orderWeight         Float    // Use Float for weight (e.g., 5.5 lbs)
    dropoffAddress      String
    dropoffContactName  String?
    dropoffContactPhone String?
    dropoffInstructions String?
    status              String   @default("pending") // values: pending, en_route_pickup, picked_up, delivered
    createdAt           DateTime @default(now())
    history             OrderHistory[]
}

model OrderHistory {
    id         Int      @id @default(autoincrement())
    orderId    Int
    order      Order    @relation(fields: [orderId], references: [id])
    customerId Int
    status     String
    updatedAt  DateTime @default(now())
}